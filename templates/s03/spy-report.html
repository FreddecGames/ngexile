{% extends "s03/layout.html" %}
{% load humanize %}
{% block content %}
<div class="page-content">
    <script>
        function putlevel(level, levels) {
        
            var s = '<img src="{{PATH_IMAGES}}img/research/level' + levels + '_' + level + '.gif" alt="Niveau ' + level + '">';
            document.write(s);
        }
    </script>
    {% if spynation %}
        <div class="card mb-3">
            <div class="card-header">
                <span class="fs-6">Rapport d'espionnage</span>
            </div>
            <div class="card-body">
                <div class="row g-1">
                    {% if spotted %}
                        <div class="col-12">
                            <span class="text-danger">Attention, nos transmissions ont été repérées et la nation {{ nation }} sait que nous avons opéré pour votre compte.</span>
                        </div>
                    {% endif %}
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Date</span></div>
                            <div class="col-9"><span>{{ date }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Nation expionnée</span></div>
                            <div class="col-9"><span>{{ nation }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Agent</span></div>
                            <div class="col-9">
                                {% if level == 0 %}<span>Novice</span>{% endif %}
                                {% if level == 1 %}<span>Initié</span>{% endif %}
                                {% if level == 2 %}<span>Agent</span>{% endif %}
                                {% if level == 3 %}<span>Taupe</span>{% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Planètes repérées</span></div>
                            <div class="col-9"><span>{{ nb_planet }}</span></div>
                        </div>
                    </div>
                    {% if credits %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Portefeuille</span></div>
                                <div class="col-9">
                                    <img src="{{ PATH_IMAGES }}img/interface/credits.gif" class="res" width="16px" height="16px" data-bs-toggle="tooltip" data-bs-title="Crédit" />
                                    <span>{{ credits|intcomma }}</span>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if researches %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Recherches connues</span></div>
                                <div class="col-9"><span>{{ nb_research }}</span></div>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% if researches %}
            <div class="card mb-3">
                <div class="card-header">
                    <span class="fs-6">Recherches</span>
                </div>
                <div class="list-group list-group-flush">
                    {% for category in categories %}
                        {% for research in category.list %}
                            <div class="row gx-3">
                                <div class="col">
                                    <span>{{ research.research }}</span>
                                </div>
                                <div class="col-auto">
                                    <script>putlevel({{research.level}},{{research.levels}});</script>
                                </div>
                            </div>
                        {% endfor %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
        <div class="card mb-3">
            <div class="card-header">
                <span class="fs-6">Planètes</span>
            </div>
            <div class="list-group list-group-flush">
                {% for planet in planets %}
                    <div class="row gx-3">
                        <div class="col-auto">
                            <a href="/s03/map/?g={{ planet.g }}&s={{ planet.s }}&p={{ planet.p }}" data-bs-toggle="tooltip" data-bs-title="Carte spatiale">{{ planet.g }}.{{ planet.s }}.{{ planet.p }}</a>
                        </div>
                        <div class="col">
                            <span>{{ planet.planet }}</span>
                        </div>
                        <div class="col-auto">
                            <img src="{{ PATH_IMAGES }}img/interface/floor.gif" width="16px" height="16px" class="res" data-bs-toggle="tooltip" data-bs-title="Terrain">
                            {{ planet.floor|intcomma }}
                        </div>
                        <div class="col-auto">
                            <img src="{{ PATH_IMAGES }}img/interface/space.gif" width="16px" height="16px" class="res" data-bs-toggle="tooltip" data-bs-title="Espace">
                            {{ planet.space|intcomma }}
                        </div>
                        <div class="col-auto">
                            <img src="{{ PATH_IMAGES }}img/interface/ore.gif" width="16px" height="16px" class="res" data-bs-toggle="tooltip" data-bs-title="Minerai">
                            {{ planet.pct_ore|intcomma }}%
                        </div>
                        <div class="col-auto">
                            <img src="{{ PATH_IMAGES }}img/interface/hydrocarbon.gif" width="16px" height="16px" class="res" data-bs-toggle="tooltip" data-bs-title="Hydrocarbure">
                            {{ planet.pct_hydrocarbon|intcomma }}%
                        </div>
                        <div class="col-auto">
                            <img src="{{ PATH_IMAGES }}img/interface/fleets.gif" width="16px" height="16px" class="res" data-bs-toggle="tooltip" data-bs-title="Vaisseaux">
                            {{ planet.ground|intcomma }}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if spyplanet %}
        <div class="card mb-3">
            <div class="card-header">
                <span class="fs-6">Rapport d'espionnage</span>
            </div>
            <div class="card-body">
                <div class="row g-1">
                    {% if spotted %}
                        <div class="col-12">
                            <span class="text-danger">Attention, nos transmissions ont été repérées et la nation {{ nation }} sait que nous avons opéré pour votre compte.</span>
                        </div>
                    {% endif %}
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Date</span></div>
                            <div class="col-9"><span>{{ date }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Planète espionnée</span></div>
                            <div class="col-9"><span>{{ location }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Agent</span></div>
                            <div class="col-9">
                                {% if level == 0 %}<span>Novice</span>{% endif %}
                                {% if level == 1 %}<span>Initié</span>{% endif %}
                                {% if level == 2 %}<span>Agent</span>{% endif %}
                                {% if level == 3 %}<span>Taupe</span>{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <span class="fs-6">Informations générales</span>
            </div>
            <div class="card-body">
                <div class="row g-1">
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Nom</span></div>
                            <div class="col-9"><span>{{ name }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Localisation</span></div>
                            <div class="col-9"><span>{{ location }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Propriétaire</span></div>
                            <div class="col-9">
                                {% if owner %}<span>{{ owner }}</span>{% endif %}
                                {% if no_owner %}<span class="text-normal">aucun</span>{% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Terrains</span></div>
                            <div class="col-9"><span>{{ floor }}</span></div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Espace</span></div>
                            <div class="col-9"><span>{{ space }}</span></div>
                        </div>
                    </div>
                    {% if uncommon %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Abondance minerai</span></div>
                                <div class="col-9"><span>{{ pct_ore }}%</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Abondance hydrocarbure</span></div>
                                <div class="col-9"><span>{{ pct_hydrocarbon }}%</span></div>
                            </div>
                        </div>
                    {% endif %}
                    <div class="col-12">
                        <div class="row gx-3">
                            <div class="col-3"><span class="text-normal">Signature au sol</span></div>
                            <div class="col-9">
                                {% if ground %}<span>{{ ground|intcomma }}</span>{% endif %}
                                {% if no_owner %}<span class="text-normal">-</span>{% endif %}
                            </div>
                        </div>
                    </div>
                    {% if common %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Production minerai</span></div>
                                <div class="col-9"><span>{{ ore_prod|intcomma }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Production hydrocarbure</span></div>
                                <div class="col-9"><span>{{ hydrocarbon_prod|intcomma }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Reserve / Capacité minerai</span></div>
                                <div class="col-9"><span>{{ ore|intcomma }} / {{ ore_capacity|intcomma }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Reserve / Capacité hydrocarbure</span></div>
                                <div class="col-9"><span>{{ hydrocarbon|intcomma }} / {{ hydrocarbon_capacity|intcomma }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Consommation / Production énergie</span></div>
                                <div class="col-9"><span>{{ energy_consumption|intcomma }} / {{ energy_prod|intcomma }}</span></div>
                            </div>
                        </div>
                    {% endif %}
                    {% if uncommon %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Puissance radar</span></div>
                                <div class="col-9"><span>{{ radar_strength }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Puissance du brouillage</span></div>
                                <div class="col-9"><span>{{ radar_jamming }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Minerai en orbite</span></div>
                                <div class="col-9"><span>{{ orbit_ore|intcomma }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Hydrocarbure en orbite</span></div>
                                <div class="col-9"><span>{{ orbit_hydrocarbon|intcomma }}</span></div>
                            </div>
                        </div>
                    {% endif %}
                    {% if rare %}
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Effectif / Capacité travailleurs</span></div>
                                <div class="col-9"><span>{{ workers }} / {{ workers_cap }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Effectif / Capacité scientifiques</span></div>
                                <div class="col-9"><span>{{ scientists }} / {{ scientists_cap }}</span></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row gx-3">
                                <div class="col-3"><span class="text-normal">Effectif / Capacité soldats</span></div>
                                <div class="col-9"><span>{{ soldiers }} / {{ soldiers_cap }}</span></div>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% if buildings %}
            <div class="card mt-3">
                <div class="card-header">
                    <span class="fs-6">Batiments</span>
                </div>
                <div class="card-body">
                    <div class="row gx-3 gy-1">
                        {% for building in buildings %}
                            <div class="col-auto">
                                <span>{{ building.building }}</span>
                                <small class="mx-2 text-normal">x</small>
                                <span>{{ building.qty }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
        {% if buildings_pending %}
            <div class="card mt-3">
                <div class="card-header">
                    <span class="fs-6">Constructions en cours</span>
                </div>
                <div class="card-body">
                    <div class="row gx-3 gy-1">
                        {% for building in buildings_pending %}
                            <div class="col-12">
                                <div class="row gx-3">
                                    <div class="col">{{ building.building }}</div>
                                    <div class="col-auto">{{ building.endtime }}</div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
