{% extends "ng0/layout.html" %}
{% load i18n %}
{% load humanize %}
{% block content %}
    {% if alliance.announce %}
        <div class="content-block">
            <div class="card">
                <div class="card-header">
                    <span class="h6 text-white">{% translate 'Alliance announce' %}</span>
                </div>
                <div class="list-group list-group-flush">
                    <div class="list-group-item">
                        {% if alliance.defcon == 5 %}
                            <span class="text-normal">{% translate 'DEFCON 5: Normal preparation in peacetime' %}</span>
                        {% endif %}
                        {% if alliance.defcon == 4 %}
                            <span class="text-info">{% translate 'DEFCON 4: Normal preparation, but increased intelligence and heightened security measures' %}</span>
                        {% endif %}
                        {% if alliance.defcon == 3 %}
                            <span class="text-warning">{% translate 'DEFCON 3: Increased force readiness above normal readiness' %}</span>
                        {% endif %}
                        {% if alliance.defcon == 2 %}
                            <span class="text-warning">{% translate 'DEFCON 2: Further increase in force readiness' %}</span>
                        {% endif %}
                        {% if alliance.defcon == 1 %}
                            <span class="text-danger">{% translate 'DEFCON 1: Maximum Force Readiness (state of war)' %}</span>
                        {% endif %}
                    </div>
                    <div class="list-group-item">
                        <span class="text-normal">{{ alliance.announce|escape|safe }}</span>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    <div class="content-block">
        <div class="card">
            <div class="card-header">
                <span class="h6 text-white">{% translate 'Statistiques' %}</span>
            </div>
            <div class="list-group list-group-flush">
                <div class="list-group-item">
                    <div class="row gx-3 gy-1">
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Orientation' %}</div>
                                        <div class="col-auto">
                                            {% if stats.orientation == 1 %}
                                                <span class="text-white">{% translate 'Merchant' %}</span>
                                            {% endif %}
                                            {% if stats.orientation == 2 %}
                                                <span class="text-white">{% translate 'Soldier' %}</span>
                                            {% endif %}
                                            {% if stats.orientation == 3 %}
                                                <span class="text-white">{% translate 'Scientist' %}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Planets' %}</div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ stats.planets|intcomma }}</span>
                                            <small>/{{ stats.mod_planets|intcomma }}</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Commanders' %}</div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ stats.commanders|intcomma }}</span>
                                            <small>/{{ stats.mod_commanders|intcomma }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Score' %}</div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ stats.score|intcomma }}</span>
                                        </div>
                                        <div class="col-auto small {% if stats.score_delta > 0 %}text-success{% else %}text-danger{% endif %}">
                                            {% if stats.score_delta > 0 %}+{% endif %}
                                            {{ stats.score_delta|intcomma }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Ore' %}</div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ stats.ore_prod|intcomma }}</span>
                                            <small>/{% translate 'hour' %}</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-baseline">
                                        <div class="col col-lg-auto">{% translate 'Hydro' %}</div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ stats.hydro_prod|intcomma }}</span>
                                            <small>/{% translate 'hour' %}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Workers' %}
                                        </div>
                                        <div class="col-auto">
                                            <div class="row gx-1 align-items-center">
                                                <div class="col-auto d-flex">
                                                    <img src="/static/ng0/img/worker.png"
                                                         width="12px"
                                                         data-bs-toggle="tooltip"
                                                         data-bs-placement="top"
                                                         data-bs-title="{% translate 'Worker' %}"/>
                                                </div>
                                                <div class="col-auto">
                                                    <span class="text-white">{{ stats.workers|intcomma }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Scientists' %}
                                        </div>
                                        <div class="col-auto">
                                            <div class="row gx-1 align-items-center">
                                                <div class="col-auto d-flex">
                                                    <img src="/static/ng0/img/scientist.png"
                                                         width="12px"
                                                         data-bs-toggle="tooltip"
                                                         data-bs-placement="top"
                                                         data-bs-title="{% translate 'Scientist' %}"/>
                                                </div>
                                                <div class="col-auto">
                                                    <span class="text-white">{{ stats.scientists|intcomma }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Soldiers' %}
                                        </div>
                                        <div class="col-auto">
                                            <div class="row gx-1 align-items-center">
                                                <div class="col-auto d-flex">
                                                    <img src="/static/ng0/img/soldier.png"
                                                         width="12px"
                                                         data-bs-toggle="tooltip"
                                                         data-bs-placement="top"
                                                         data-bs-title="{% translate 'Soldier' %}"/>
                                                </div>
                                                <div class="col-auto">
                                                    <span class="text-white">{{ stats.soldiers|intcomma }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="content-block">
        <div class="card">
            <div class="card-header">
                <span class="h6 text-white">{% translate 'Upkeep cost' %}</span>
            </div>
            <div class="list-group list-group-flush">
                <div class="list-group-item">
                    <div class="row gx-3 gy-1">
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Fleet ships' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.ships|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'In position fleets' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.inposition|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Ground ships' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.parked|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Commanders' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.commanders|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Planets' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.planets|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-4">
                            <div class="row g-1">
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Scientists' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.scientists|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row gx-2 flex-nowrap align-items-center">
                                        <div class="col col-lg-auto">
                                            {% translate 'Soldiers' %}
                                        </div>
                                        <div class="col-auto">
                                            <span class="text-white">{{ upkeep.soldiers|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="list-group-item">
                    <div class="row gx-2 flex-nowrap align-items-center">
                        <div class="col col-lg-auto">
                            <span class="text-normal">{% translate 'Total' %}</span>
                        </div>
                        <div class="col-auto">
                            <div class="row gx-1 flex-nowrap align-items-center">
                                <div class="col-auto d-flex">
                                    <img src="/static/ng0/img/credit.png"
                                         width="12px"
                                         data-bs-toggle="tooltip"
                                         data-bs-placement="top"
                                         data-bs-title="{% translate 'Coin' %}">
                                </div>
                                <div class="col-auto">
                                    <span class="text-white">{{ upkeep.total|intcomma }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="content-block">
        <div class="card">
            <div class="card-header">
                <span class="h6 text-white">{% translate 'Tech in progress' %}</span>
            </div>
            <div class="list-group list-group-flush">
                <div class="list-group-item">
                    {% if tech %}
                        <div class="row gx-2 flex-nowrap align-items-center">
                            <div class="col">
                                <a href="/ng0/empire-techs/#{{ tech.id }}"
                                   data-bs-toggle="tooltip"
                                   data-bs-placement="top"
                                   data-bs-title="{% translate 'View laboratory' %}">{{ tech.label }}</a>
                            </div>
                            <div class="col-auto text-yellow">
                                <script>putcountdown1({{ tech.remaining_time }}, '{% translate 'Completed' %}', '/ng0/empire-techs/')</script>
                            </div>
                        </div>
                    {% else %}
                        <a href="/ng0/empire-techs/"
                           data-bs-toggle="tooltip"
                           data-bs-placement="top"
                           data-bs-title="{% translate 'View laboratory' %}">{% translate 'No tech in progress' %}</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="content-block">
        <div class="card">
            <div class="card-header">
                <span class="h6 text-white">{% translate 'Moving fleets to our planets' %}</span>
            </div>
            <div class="list-group list-group-flush">
                <div class="list-group-item">
                    <div class="row g-1 flex-column">
                        {% for fleet in movings %}
                            <div class="col-12">
                                <div class="row gx-3">
                                    <div class="col">
                                        <div class="row gx-2 align-items-baseline">
                                            <div class="col-auto">
                                                <div class="row gx-1 align-items-center">
                                                    {% if fleet.relation == 1 %}
                                                        <div class="col-auto">
                                                            <a href="/ng0/mail-new/?to={{ fleet.owner_name }}"
                                                               class="link-success"
                                                               data-bs-toggle="tooltip"
                                                               data-bs-placement="top"
                                                               data-bs-title="{% translate 'Send a mail' %}">{{ fleet.owner_name }}</a>
                                                        </div>
                                                    {% elif fleet.relation == 0 %}
                                                        <div class="col-auto">
                                                            <a href="/ng0/mail-new/?to={{ fleet.owner_name }}"
                                                               class="link-success"
                                                               data-bs-toggle="tooltip"
                                                               data-bs-placement="top"
                                                               data-bs-title="{% translate 'Send a mail' %}">{{ fleet.owner_name }}</a>
                                                        </div>
                                                    {% elif fleet.relation < 0 %}
                                                        <div class="col-auto">
                                                            <a href="/ng0/profile-view/?name={{ fleet.owner_name }}"
                                                               class="link-danger"
                                                               data-bs-toggle="tooltip"
                                                               data-bs-placement="top"
                                                               data-bs-title="{% translate 'View profile' %}">{{ fleet.owner_name }}</a>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="col small">
                                                {% if fleet.signature > 0 %}
                                                    <span>{{ fleet.signature|intcomma }}</span>
                                                {% else %}
                                                    <span>???</span>
                                                {% endif %}
                                            </div>
                                            <div class="col-auto">
                                                <span data-bs-toggle="tooltip"
                                                      data-bs-placement="top"
                                                      data-bs-title="{% translate 'Map' %}"><script>putplanet('{{ fleet.destplanetid }}', '{{ fleet.destplanetname }}', '{{ fleet.destplanet_galaxy }}', '{{ fleet.destplanet_sector }}', '{{ fleet.destplanet_planet }}', {{ fleet.destplanet_relation }});</script></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <span class="text-yellow"><script>putcountdown1({{ fleet.remaining_time }}, '{% translate 'Arrived' %}', '/ng0/empire-view/')</script></span>
                                    </div>
                                </div>
                            </div>
                        {% empty %}
                            <div class="col-12">
                                <span class="text-normal">{% translate 'No moving fleet' %}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
